# label: %label%
# style: shape=%shape%;rounded=1;whiteSpace=wrap;html=1;fillColor=%fill%;strokeColor=%stroke%;fontColor=%font%;fontSize=12;
# parentstyle: swimlane;whiteSpace=wrap;html=1;childLayout=stackLayout;horizontal=1;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;fontColor=#FFFFFF;
# namespace: pcte-
# connect: {"from": "id", "to": "t1", "label": "%l1%", "style": "endArrow=block;endFill=1;strokeColor=#D4AF37;fontColor=#FFFFFF;labelBackgroundColor=#1a1a1a;curved=%c1%;"}
# connect: {"from": "id", "to": "t2", "label": "%l2%", "style": "endArrow=block;endFill=1;strokeColor=#D4AF37;fontColor=#FFFFFF;labelBackgroundColor=#1a1a1a;curved=%c2%;"}
# connect: {"from": "id", "to": "t3", "label": "%l3%", "style": "endArrow=block;endFill=1;strokeColor=#D4AF37;fontColor=#FFFFFF;labelBackgroundColor=#1a1a1a;curved=%c3%;"}
# connect: {"from": "id", "to": "t4", "label": "%l4%", "style": "endArrow=block;endFill=1;strokeColor=#D4AF37;fontColor=#FFFFFF;labelBackgroundColor=#1a1a1a;curved=%c4%;"}
# connect: {"from": "id", "to": "t5", "label": "%l5%", "style": "endArrow=block;endFill=1;strokeColor=#D4AF37;fontColor=#FFFFFF;labelBackgroundColor=#1a1a1a;curved=%c5%;"}
# connect: {"from": "id", "to": "t6", "label": "%l6%", "style": "endArrow=block;endFill=1;strokeColor=#D4AF37;fontColor=#FFFFFF;labelBackgroundColor=#1a1a1a;curved=%c6%;"}
# width: auto
# height: auto
# padding: 6
# ignore: w,h,notes
# layout: auto
#
# Palette reference:
# - Blue (Interfaces & I/O): #2196F3, font #121212
# - Green (Services & Data): #4A7C59, font #FFFFFF
# - Gold (Security & Stores): #D4AF37, font #121212
# - Dark Gray lanes: #242424, stroke #333333, font #FFFFFF
# - EP lane: #0D47A1, font #FFFFFF
#
id,label,parent,shape,fill,stroke,font,w,h,notes,t1,l1,c1,t2,l2,c2,t3,l3,c3,t4,l4,c4,t5,l5,c5,t6,l6,c6
CP,Control Plane (CP) — No Internet Egress,,swimlane,#242424,#333333,#FFFFFF,1100,900,,,,,,,,,,,,,,,,,
EP,Event Plane — Ranges / VMs — No public Internet,,swimlane,#0D47A1,#333333,#FFFFFF,1100,260,,OTel,EP traces/metr.,1,,,,,,,,,,,,,
Users,User Roles,CP,swimlane,#242424,#333333,#FFFFFF,260,180,,Proxy,User auth via proxy and SSO,0,AdminConsole,Admin access via proxy,1,,,,,,,
Operators,Operators,Users,rectangle,#4A7C59,#333333,#FFFFFF,120,40,,,,,,,,,,,,,,,,
Analysts,Analysts,Users,rectangle,#4A7C59,#333333,#FFFFFF,120,40,,,,,,,,,,,,,,,,
Managers,Managers,Users,rectangle,#4A7C59,#333333,#FFFFFF,120,40,,,,,,,,,,,,,,,,
Admins,Admins,Users,rectangle,#4A7C59,#333333,#FFFFFF,120,40,,,,,,,,,,,,,,,,
Access,Access & Identity,CP,swimlane,#242424,#333333,#FFFFFF,1060,150,"CP-Internal Identity Only. SSO + RBAC Enforced. mTLS + OIDC Everywhere.\nCryptography token with short lived permission.",,,,,,,,,,,,,,,
Proxy,Reverse Proxy (mTLS, OIDC),Access,rectangle,#2196F3,#333333,#121212,200,60,,SSO,mTLS + OIDC,0,UI,HTTPS,0,,,,,,
SSO,Red Hat SSO / IDM,Access,rectangle,#4A7C59,#333333,#FFFFFF,200,60,,RBAC,Token policy,0,,,,,,,,,,
RBAC,RBAC Policy Store,Access,rectangle,#D4AF37,#333333,#121212,200,60,,Proxy,AuthZ decision,0,,,,,,,,,,
App,Application & Services,CP,swimlane,#242424,#333333,#FFFFFF,1060,340,"Local Inference Only.",,,,,,,,,,,,,,,
UI,Self-Service UI (Help Desk),App,rectangle,#2196F3,#333333,#121212,220,60,,RAG,User query,0,,,,,,,,,,
AdminConsole,Admin Console — KB curation, config,App,rectangle,#2196F3,#333333,#121212,260,60,,Postgres,KB curation writes,0,Vector,KB re-embed,0,,,,,,
Emb,Embeddings Service — bge-small / e5-small,App,rectangle,#4A7C59,#333333,#FFFFFF,260,60,,,,,,,,,,,,,,,,
Connectors,Connectors — Jira, Confl., MKDocs, Mattermost,App,rectangle,#4A7C59,#333333,#FFFFFF,300,60,,Postgres,KB sync index,0,Vector,KB embeddings,0,,,,,,
RAG,RAG Orchestrator — tools, prompts, guardrails,App,rectangle,#4A7C59,#333333,#FFFFFF,300,60,,LLM,Prompt + tools,0,Emb,Embed/Similarity,0,Connectors,KB/API calls,1,Vector,Vector search,0,Postgres,Config/State,0
LLM,LLM Inference — llama.cpp / vLLM,App,rectangle,#4A7C59,#333333,#FFFFFF,260,60,,Vector,Context fetch,0,Artifacts,Model load,0,,,,,,
Data,Data & Storage,CP,swimlane,#242424,#333333,#FFFFFF,1060,200,,,,,,,,,,,,,,,,
Vector,Vector DB (pgvector/Milvus),Data,rectangle,#2196F3,#333333,#121212,260,60,,,,,,,,,,,,,,,,
Postgres,PostgreSQL (metadata),Data,rectangle,#4A7C59,#333333,#FFFFFF,220,60,,,,,,,,,,,,,,,,
Audit,Audit Logs (append-only),Data,rectangle,#D4AF37,#333333,#121212,240,60,,,,,,,,,,,,,,,,
Artifacts,Artifacts (models),Data,rectangle,#D4AF37,#333333,#121212,220,60,,,,,,,,,,,,,,,,
Obs,Observability & Security,CP,swimlane,#242424,#333333,#FFFFFF,1060,180,"Encryption: In-Transit TLS 1.3. At-Rest AES-256 (FIPS140-2).\nAC/AU/SC Controls Enforced. RMF/NIST-Aligned Guardrails.",,,,,,,,,,,,,,,
Prom,Prometheus / Grafana,Obs,rectangle,#4A7C59,#333333,#FFFFFF,240,60,,App,Metrics scrape,0,,,,,,,,,,
OTel,OpenTelemetry (traces),Obs,rectangle,#2196F3,#333333,#121212,240,60,,Loki,Traces to logs,0,,,,,,,,,,
Loki,Loki / ELK (logs),Obs,rectangle,#2196F3,#333333,#121212,220,60,,,,,,,,,,,,,,,,
SIEM,Guardrails / SIEM,Obs,rectangle,#D4AF37,#333333,#121212,220,60,,RAG,Guardrail policy,0,LLM,Guardrail enforcement,0,,,,,,
EPFeed,EP Telemetry Broker,EP,rectangle,#0D47A1,#333333,#FFFFFF,240,60,,OTel,EP traces/metr.,1,,,,,,,,,,
AppToAudit,(internal) App → Audit (helper),App,text,#242424,#333333,#FFFFFF,10,10,,Audit,Action logs,0,,,,,,,,,,
